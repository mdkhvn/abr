############################
# KRaft Configuration
############################

process.roles=broker,controller
node.id={{ kafka_node_id }}

controller.listener.names=CONTROLLER

listeners={% for l in kafka_listeners %}
{{ l.name }}://:{{ l.port }}{% if not loop.last %},{% endif %}
{% endfor %}

listener.security.protocol.map=PLAINTEXT:PLAINTEXT,CONTROLLER:PLAINTEXT

inter.broker.listener.name=PLAINTEXT

controller.quorum.voters={{ kafka_controller_quorum_voters | join(",") }}

############################
# Log / Data
############################

log.dirs={{ kafka_data_dir }}/logs
num.partitions={{ kafka_num_partitions }}

############################
# Replication (single node safe)
############################

offsets.topic.replication.factor=1
transaction.state.log.replication.factor=1
transaction.state.log.min.isr=1

############################
# Safety
############################

auto.create.topics.enable={{ kafka_auto_create_topics | lower }}
delete.topic.enable=true
